{
  "resourceType": "Bundle",
  "id": "mii-bdl-measure-library-transaction-bundle",
  "entry": [
    {
      "request": {
        "method": "PUT",
        "url": "Library/mii-lib-stratifier-age-gender"
      },
      "fullUrl": "https://www.medizininformatik-initiative.de/Library/mii-lib-stratifier-age-gender",
      "resource": {
        "resourceType": "Library",
        "id": "mii-lib-stratifier-age-gender",
        "content": [
          {
            "contentType": "text/cql",
            "data": "bGlicmFyeSAic3RyYXRpZmllci1hZ2UtZ2VuZGVyIgp1c2luZyBGSElSIHZlcnNpb24gJzQuMC4wJwppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuMC4wJwoKY29udGV4dCBQYXRpZW50CgpkZWZpbmUgSW5Jbml0aWFsUG9wdWxhdGlvbjoKICB0cnVlCgpkZWZpbmUgQmlydGhZZWFyOgogIHllYXIgZnJvbSBQYXRpZW50LmJpcnRoRGF0ZQoKLy8gQ2FsY3VsYXRlIHRoZSBwYXRpZW50J3MgYWdlIGluIHllYXJzIGFzIG9mIHRvZGF5CmRlZmluZSBBZ2VJblllYXJzOgogIEFnZUluWWVhcnNBdChUb2RheSgpKQoKLy8gQ2FsY3VsYXRlIHRoZSBwYXRpZW50J3MgYWdlIGluIHllYXJzIGF0IGEgc3BlY2lmaWMgZGF0ZQpkZWZpbmUgZnVuY3Rpb24gQWdlSW5ZZWFyc0F0KGFzT2YgRGF0ZVRpbWUpOgogIGlmIFBhdGllbnQuYmlydGhEYXRlIGlzIG51bGwgdGhlbiBudWxsCiAgZWxzZSB5ZWFycyBiZXR3ZWVuIEZISVJIZWxwZXJzLlRvRGF0ZShQYXRpZW50LmJpcnRoRGF0ZSkgYW5kIGFzT2YKCi8vIENhbGN1bGF0ZSB0aGUgcGF0aWVudCdzIGFnZSBpbiBtb250aHMKZGVmaW5lIEFnZUluTW9udGhzOgogIEFnZUluTW9udGhzQXQoVG9kYXkoKSkKCi8vIENhbGN1bGF0ZSB0aGUgcGF0aWVudCdzIGFnZSBpbiBtb250aHMgYXQgYSBzcGVjaWZpYyBkYXRlICAKZGVmaW5lIGZ1bmN0aW9uIEFnZUluTW9udGhzQXQoYXNPZiBEYXRlVGltZSk6CiAgaWYgUGF0aWVudC5iaXJ0aERhdGUgaXMgbnVsbCB0aGVuIG51bGwKICBlbHNlIG1vbnRocyBiZXR3ZWVuIEZISVJIZWxwZXJzLlRvRGF0ZShQYXRpZW50LmJpcnRoRGF0ZSkgYW5kIGFzT2YKCi8vIENhbGN1bGF0ZSB0aGUgcGF0aWVudCdzIGFnZSBpbiBkYXlzCmRlZmluZSBBZ2VJbkRheXM6CiAgQWdlSW5EYXlzQXQoVG9kYXkoKSkKCi8vIENhbGN1bGF0ZSB0aGUgcGF0aWVudCdzIGFnZSBpbiBkYXlzIGF0IGEgc3BlY2lmaWMgZGF0ZQpkZWZpbmUgZnVuY3Rpb24gQWdlSW5EYXlzQXQoYXNPZiBEYXRlVGltZSk6CiAgaWYgUGF0aWVudC5iaXJ0aERhdGUgaXMgbnVsbCB0aGVuIG51bGwKICBlbHNlIGRheXMgYmV0d2VlbiBGSElSSGVscGVycy5Ub0RhdGUoUGF0aWVudC5iaXJ0aERhdGUpIGFuZCBhc09mCgovLyBBbHRlcm5hdGl2ZSBhZ2UgY2FsY3VsYXRpb24gdXNpbmcgZGF0ZSBhcml0aG1ldGljCmRlZmluZSBBZ2VJblllYXJzU2ltcGxlOgogIGlmIFBhdGllbnQuYmlydGhEYXRlIGlzIG51bGwgdGhlbiBudWxsCiAgZWxzZSB5ZWFyIGZyb20gVG9kYXkoKSAtIHllYXIgZnJvbSBGSElSSGVscGVycy5Ub0RhdGUoUGF0aWVudC5iaXJ0aERhdGUpCgovLyBBZ2Ugc3RyYXRpZmljYXRpb24gZXhhbXBsZXMKZGVmaW5lIEFnZUdyb3VwOgogIGNhc2UKICAgIHdoZW4gQWdlSW5ZZWFycyBpcyBudWxsIHRoZW4gbnVsbAogICAgd2hlbiBBZ2VJblllYXJzIDwgMTggdGhlbiAnUGVkaWF0cmljJwogICAgd2hlbiBBZ2VJblllYXJzID49IDE4IGFuZCBBZ2VJblllYXJzIDwgNjUgdGhlbiAnQWR1bHQnCiAgICB3aGVuIEFnZUluWWVhcnMgPj0gNjUgdGhlbiAnR2VyaWF0cmljJwogICAgZWxzZSBudWxsCiAgZW5kCgpkZWZpbmUgQWdlRGVjYWRlOgogIGNhc2UKICAgIHdoZW4gQWdlSW5ZZWFycyBpcyBudWxsIHRoZW4gbnVsbAogICAgd2hlbiBBZ2VJblllYXJzIDwgMTAgdGhlbiAnMC05JwogICAgd2hlbiBBZ2VJblllYXJzID49IDEwIGFuZCBBZ2VJblllYXJzIDwgMjAgdGhlbiAnMTAtMTknCiAgICB3aGVuIEFnZUluWWVhcnMgPj0gMjAgYW5kIEFnZUluWWVhcnMgPCAzMCB0aGVuICcyMC0yOScKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSAzMCBhbmQgQWdlSW5ZZWFycyA8IDQwIHRoZW4gJzMwLTM5JwogICAgd2hlbiBBZ2VJblllYXJzID49IDQwIGFuZCBBZ2VJblllYXJzIDwgNTAgdGhlbiAnNDAtNDknCiAgICB3aGVuIEFnZUluWWVhcnMgPj0gNTAgYW5kIEFnZUluWWVhcnMgPCA2MCB0aGVuICc1MC01OScKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSA2MCBhbmQgQWdlSW5ZZWFycyA8IDcwIHRoZW4gJzYwLTY5JwogICAgd2hlbiBBZ2VJblllYXJzID49IDcwIGFuZCBBZ2VJblllYXJzIDwgODAgdGhlbiAnNzAtNzknCiAgICB3aGVuIEFnZUluWWVhcnMgPj0gODAgYW5kIEFnZUluWWVhcnMgPCA5MCB0aGVuICc4MC04OScKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSA5MCB0aGVuICc5MCsnCiAgICBlbHNlIG51bGwKICBlbmQKCi8vIDUteWVhciBhZ2UgZ3JvdXBzIG1hdGNoaW5nIEdlcm1hbiBjZW5zdXMgZGF0YSBzdHJ1Y3R1cmUKZGVmaW5lIEFnZUZpdmVZZWFyR3JvdXBzOgogIGNhc2UKICAgIHdoZW4gQWdlSW5ZZWFycyBpcyBudWxsIHRoZW4gbnVsbAogICAgd2hlbiBBZ2VJblllYXJzID49IDAgYW5kIEFnZUluWWVhcnMgPCA1IHRoZW4gJzAtNCcKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSA1IGFuZCBBZ2VJblllYXJzIDwgMTAgdGhlbiAnNS05JwogICAgd2hlbiBBZ2VJblllYXJzID49IDEwIGFuZCBBZ2VJblllYXJzIDwgMTUgdGhlbiAnMTAtMTQnCiAgICB3aGVuIEFnZUluWWVhcnMgPj0gMTUgYW5kIEFnZUluWWVhcnMgPCAyMCB0aGVuICcxNS0xOScKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSAyMCBhbmQgQWdlSW5ZZWFycyA8IDI1IHRoZW4gJzIwLTI0JwogICAgd2hlbiBBZ2VJblllYXJzID49IDI1IGFuZCBBZ2VJblllYXJzIDwgMzAgdGhlbiAnMjUtMjknCiAgICB3aGVuIEFnZUluWWVhcnMgPj0gMzAgYW5kIEFnZUluWWVhcnMgPCAzNSB0aGVuICczMC0zNCcKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSAzNSBhbmQgQWdlSW5ZZWFycyA8IDQwIHRoZW4gJzM1LTM5JwogICAgd2hlbiBBZ2VJblllYXJzID49IDQwIGFuZCBBZ2VJblllYXJzIDwgNDUgdGhlbiAnNDAtNDQnCiAgICB3aGVuIEFnZUluWWVhcnMgPj0gNDUgYW5kIEFnZUluWWVhcnMgPCA1MCB0aGVuICc0NS00OScKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSA1MCBhbmQgQWdlSW5ZZWFycyA8IDU1IHRoZW4gJzUwLTU0JwogICAgd2hlbiBBZ2VJblllYXJzID49IDU1IGFuZCBBZ2VJblllYXJzIDwgNjAgdGhlbiAnNTUtNTknCiAgICB3aGVuIEFnZUluWWVhcnMgPj0gNjAgYW5kIEFnZUluWWVhcnMgPCA2NSB0aGVuICc2MC02NCcKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSA2NSBhbmQgQWdlSW5ZZWFycyA8IDcwIHRoZW4gJzY1LTY5JwogICAgd2hlbiBBZ2VJblllYXJzID49IDcwIGFuZCBBZ2VJblllYXJzIDwgNzUgdGhlbiAnNzAtNzQnCiAgICB3aGVuIEFnZUluWWVhcnMgPj0gNzUgYW5kIEFnZUluWWVhcnMgPCA4MCB0aGVuICc3NS03OScKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSA4MCBhbmQgQWdlSW5ZZWFycyA8IDg1IHRoZW4gJzgwLTg0JwogICAgd2hlbiBBZ2VJblllYXJzID49IDg1IGFuZCBBZ2VJblllYXJzIDwgOTAgdGhlbiAnODUtODknCiAgICB3aGVuIEFnZUluWWVhcnMgPj0gOTAgYW5kIEFnZUluWWVhcnMgPCA5NSB0aGVuICc5MC05NCcKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSA5NSB0aGVuICc5NSsnCiAgICBlbHNlIG51bGwKICBlbmQKCi8vIEFsdGVybmF0aXZlIHNob3J0ZXIgZXhwcmVzc2lvbiB1c2luZyBtYXRoZW1hdGljYWwgYXBwcm9hY2gKZGVmaW5lIEFnZUZpdmVZZWFyR3JvdXBzTWF0aDoKICBjYXNlCiAgICB3aGVuIEFnZUluWWVhcnMgaXMgbnVsbCB0aGVuIG51bGwKICAgIHdoZW4gQWdlSW5ZZWFycyA+PSA5NSB0aGVuICc5NSsnCiAgICBlbHNlIFRvU3RyaW5nKChBZ2VJblllYXJzIGRpdiA1KSAqIDUpICsgJy0nICsgVG9TdHJpbmcoKChBZ2VJblllYXJzIGRpdiA1KSAqIDUpICsgNCkKICBlbmQKCi8vIENoZWNrIGlmIHBhdGllbnQgaXMgYW4gYWR1bHQgKDE4IG9yIG9sZGVyKQpkZWZpbmUgSXNBZHVsdDoKICBBZ2VJblllYXJzID49IDE4CgovLyBDaGVjayBpZiBwYXRpZW50IGlzIGEgbWlub3IgKHVuZGVyIDE4KQpkZWZpbmUgSXNNaW5vcjoKICBBZ2VJblllYXJzIDwgMTgKCi8vIENoZWNrIGlmIHBhdGllbnQgaXMgZWxkZXJseSAoNjUgb3Igb2xkZXIpCmRlZmluZSBJc0VsZGVybHk6CiAgQWdlSW5ZZWFycyA+PSA2NQoKLy8gR2VuZGVyIGZvciBzdHJhdGlmaWNhdGlvbgpkZWZpbmUgR2VuZGVyOgogIFBhdGllbnQuZ2VuZGVyCg=="
          }
        ],
        "parameter": [
          {
            "name": "Measurement Period",
            "use": "in",
            "min": 0,
            "max": "1",
            "type": "Period"
          }
        ],
        "dataRequirement": [
          {
            "profile": [
              "http://hl7.org/fhir/StructureDefinition/Patient"
            ],
            "type": "Patient"
          }
        ],
        "url": "https://www.medizininformatik-initiative.de/fhir/Library/StratifierAgeGender",
        "version": "1.0.0",
        "name": "StratifierAgeGender",
        "title": "Patient Age and Gender Stratification Library",
        "status": "active",
        "experimental": false,
        "type": {
          "coding": [
            {
              "code": "logic-library",
              "system": "http://terminology.hl7.org/CodeSystem/library-type"
            }
          ]
        },
        "description": "CQL library for calculating patient ages and gender-based stratifications",
        "publisher": "MII",
        "date": "2025-10-16"
      }
    },
    {
      "request": {
        "method": "PUT",
        "url": "Measure/mii-msr-summary-report-age-gender-cql"
      },
      "fullUrl": "https://www.medizininformatik-initiative.de/Measure/mii-msr-summary-report-age-gender-cql",
      "resource": {
        "resourceType": "Measure",
        "id": "mii-msr-summary-report-age-gender-cql",
        "meta": {
          "profile": [
            "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablemeasure"
          ]
        },
        "library": [
          "https://www.medizininformatik-initiative.de/fhir/Library/StratifierAgeGender"
        ],
        "group": [
          {
            "population": [
              {
                "criteria": {
                  "language": "text/cql-identifier",
                  "expression": "InInitialPopulation"
                },
                "code": {
                  "coding": [
                    {
                      "code": "initial-population",
                      "system": "http://terminology.hl7.org/CodeSystem/measure-population"
                    }
                  ]
                },
                "id": "initial-population-identifier"
              }
            ],
            "stratifier": [
              {
                "criteria": {
                  "language": "text/cql-identifier",
                  "expression": "Gender"
                },
                "code": {
                  "coding": [
                    {
                      "code": "99502-7",
                      "system": "http://loinc.org",
                      "display": "Recorded sex or gender"
                    }
                  ]
                },
                "id": "stratifier-gender"
              },
              {
                "criteria": {
                  "language": "text/cql-identifier",
                  "expression": "AgeFiveYearGroups"
                },
                "code": {
                  "coding": [
                    {
                      "code": "46251-5",
                      "system": "http://loinc.org",
                      "display": "Age group"
                    }
                  ]
                },
                "id": "stratifier-age-five-year-groups"
              }
            ],
            "description": "Patient stratification by gender and 5-year age groups"
          }
        ],
        "version": "1.0",
        "url": "https://medizininformatik-initiative.de/fhir/Measure/SummaryReportAgeGenderCQL",
        "status": "active",
        "experimental": false,
        "publisher": "MII",
        "name": "SummaryReportAgeGenderCQL",
        "title": "Summary Report Age Gender CQL",
        "description": "Summary Report with gender and 5-year age group stratification using CQL matching German census data structure",
        "date": "2025-10-16"
      }
    },
    {
      "request": {
        "method": "PUT",
        "url": "Measure/mii-msr-summary-report-composite-gender-age-cql"
      },
      "fullUrl": "https://www.medizininformatik-initiative.de/Measure/mii-msr-summary-report-composite-gender-age-cql",
      "resource": {
        "resourceType": "Measure",
        "id": "mii-msr-summary-report-composite-gender-age-cql",
        "library": [
          "https://www.medizininformatik-initiative.de/fhir/Library/StratifierAgeGender"
        ],
        "group": [
          {
            "population": [
              {
                "criteria": {
                  "language": "text/cql-identifier",
                  "expression": "InInitialPopulation"
                },
                "code": {
                  "coding": [
                    {
                      "code": "initial-population",
                      "system": "http://terminology.hl7.org/CodeSystem/measure-population"
                    }
                  ]
                },
                "id": "initial-population"
              }
            ],
            "stratifier": [
              {
                "component": [
                  {
                    "criteria": {
                      "language": "text/cql-identifier",
                      "expression": "AgeFiveYearGroups"
                    },
                    "code": {
                      "coding": [
                        {
                          "code": "46251-5",
                          "system": "http://loinc.org",
                          "display": "Age group"
                        }
                      ]
                    },
                    "description": "Patient age five year group"
                  },
                  {
                    "criteria": {
                      "language": "text/cql-identifier",
                      "expression": "Gender"
                    },
                    "code": {
                      "coding": [
                        {
                          "code": "99502-7",
                          "system": "http://loinc.org",
                          "display": "Recorded sex or gender"
                        }
                      ]
                    },
                    "description": "Patient gender"
                  }
                ]
              }
            ],
            "description": "Composite stratification by gender and age decade"
          }
        ],
        "version": "1.0",
        "url": "https://medizininformatik-initiative.de/fhir/Measure/SummaryReportCompositeAgeGenderCQL",
        "status": "active",
        "experimental": false,
        "publisher": "MII",
        "name": "SummaryReportCompositeAgeGenderCQL",
        "title": "Summary Report Composite Age Gender CQL",
        "description": "Summary Report with gender and age decade stratification using CQL in a composite stratifier",
        "date": "2025-09-30"
      }
    }
  ],
  "type": "transaction",
  "timestamp": "2025-09-30T17:24:00+02:00"
}
